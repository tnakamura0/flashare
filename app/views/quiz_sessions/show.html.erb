<% set_meta_tags title: t(".title") %>
<% content_for(:title, t(".title")) %>
<div class="mt-24 mb-8 px-2 md:px-10 lg:px-16 py-4 md:py-8 rounded-2xl md:rounded-3xl bg-violet-50">
  <div class="flex justify-between">
    <h1 class="font-bold text-3xl md:text-4xl">
      <i class="fa-solid fa-bullhorn"></i><%= t(".title") %>
    </h1>
    <%= button_to quiz_sessions_path(deck_id: @quiz_session.deck.id), { method: :post, class: "text-center text-lime-50 bg-linear-to-r from-blue-500 to-violet-500 hover:opacity-70 border border-indigo-600 rounded px-2 md:px-4 py-2" } do %>
      <i class="fa-solid fa-folder-plus"></i> <%= t(".retry") %>
    <% end %>
  </div>
  <p class="font-bold text-xl my-2"><%= t(".result", total_questions: @quiz_session.total_questions, correct_number: @correct_number) %></p>
  <div class="bg-violet-100 p-2">
    <h2 class="font-bold text-2xl text-center"><%= t(".result_detail") %></h2>
    <div class="mt-2">
      <div class="text-center">
        <span class="border-b">
          <i class="fa-solid fa-user"></i> <%= @quiz_session.deck.user.name %>
        </span>
        <div class="font-bold">
          <%= @quiz_session.deck.name %>
        </div>
      </div>
      <div class="grid grid-cols-[40px_auto_40px] md:w-2/3 lg:w-1/3 border mx-auto text-center">
        <p class="font-bold border-r">No.</p>
        <p class="font-bold border-r"><%= t(".card_name") %></p>
        <p class="font-bold"><%= t(".correctness") %></p>
        <% @answers.each_with_index do |answer, index| %>
          <div class="border-r border-t"><%= index + 1 %></div>
          <div class="border-r border-t"><%= answer.card.name %></div>
          <div class="border-t">
            <%= answer.correct ? t(".correct") : t(".incorrect") %>
          </div>
        <% end %>
    </div>
    <h3 class="font-bold text-lg mt-4 text-center"><%= t(".incorrect_cards") %></h3>
    <% if @incorrect_answers.exists? %>
      <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2">
        <% @incorrect_answers.each do |incorrect_answer| %>
          <%= render "incorrect_answer", incorrect_answer: incorrect_answer %>
        <% end %>
      </div>
    <% else %>
      <div class="text-lime-600 text-center">
        <i class="fa-solid fa-circle-check"></i> <%= t(".all_correct_message") %>
      </div>
    <% end %>
  </div>
</div>
